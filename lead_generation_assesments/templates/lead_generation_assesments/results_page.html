{% extends "base.html" %}

{% load static %}

{% block head_title %} {% endblock %}

{% block content %}

{% load custom_tags %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"
        integrity="sha512-Wt1bJGtlnMtGP0dqNFH1xlkLBNpEodaiQ8ZN5JLA5wpc1sUlk/O5uuOMNgvzddzkpvZ9GLyYNa8w2s7rqiTk5Q=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<div class="container">
  <div class="row">
    <div class="col s12">
      <h1>SEO Maturity Assessment</h1>
    </div>
    <div class="col s12 m6">
      <h2>
        Matriz de Madurez
      </h2>
      <table>
        <thead>
        <tr>
          <th>Factores de Éxito SEO</th>
          <th class="">Estado Actual</th>
          <th class="">Objetivo</th>
        </tr>
        </thead>

        <tr>
          <td>Estrategia & Habilidades</td>
          <td>{{ seo_ave }}</td>
          <td>4.0</td>
        </tr>

        <tr>
          <td>Definición de procesos, Automatización y Sistemas</td>
          <td>{{ sistemas_ave }}</td>
          <td>4.0</td>
        </tr>

        <tr>
          <td>Keyword Management</td>
          <td>{{ keyword_ave }}</td>
          <td>4.0</td>
        </tr>

        <tr>
          <td>Informes y Resultados</td>
          <td>{{ resultados_ave }}</td>
          <td>4.0</td>
        </tr>

        <tr>
          <td>SEO Maturity Index</td>
          <td>{{ audit_ave }}</td>
          <td>4.0</td>
        </tr>


      </table>
    </div>

    <div class="col s12 m5 offset-m1">
      <canvas id="myChart" width="100%" height="100%"></canvas>

    </div>
  </div>
</div>

<div class="container mt-5">
  <div class="row">
    <div class="col s12">
      <h2>
        Resultados y Recomendaciones
      </h2>
    </div>

    <div class="col s12">
      <table>
        <thead>
        <tr>
          <!--                    <th>#</th>-->
          <th>Factores de Éxito Lead Management</th>
          <th class="">Score</th>
          <th class="">Recomendaciones</th>
          <th class="">Recursos</th>

        </tr>
        </thead>

        {% for obj in table_data %}

        {% if forloop.counter == 1 %}
        <tr>
          <th>{{ QUESTIONS_TITLES.0}}</th>
        </tr>

        {% elif forloop.counter == 6 %}
        <tr>
          <th>{{ QUESTIONS_TITLES.1}}</th>
        </tr>

        {% elif forloop.counter == 12 %}
        <tr>
          <th>{{ QUESTIONS_TITLES.2}}</th>
        </tr>

        {% elif forloop.counter == 18 %}
        <tr>
          <th>{{ QUESTIONS_TITLES.3}}</th>
        </tr>

        {% elif forloop.counter == 24 %}
        <tr>
          <th>{{ QUESTIONS_TITLES.4}}</th>
        </tr>

        {% elif forloop.counter == 30 %}
        <tr>
          <th>{{ QUESTIONS_TITLES.5}}</th>
        </tr>

        {% elif forloop.counter == 36 %}
        <tr>
          <th>{{ QUESTIONS_TITLES.6}}</th>
        </tr>

        {% elif forloop.counter == 40 %}
        <tr>
          <th>{{ QUESTIONS_TITLES.7}}</th>
        </tr>

        {% elif forloop.counter == 45 %}
        <tr>
          <th>{{ QUESTIONS_TITLES.8}}</th>
        </tr>
        {% endif %}

        <tr>
          <!--                    <td>{{ forloop.counter }}</td>-->
          <td>{{ obj|dict_key:'title' }}</td>
          <td>{{ obj|dict_key:'answer' }}</td>
          <td>{{ obj|dict_key:'description' }}</td>
          <td>{{ obj|dict_key:'resource' }}</td>
        </tr>

        {% endfor %}

      </table>

    </div>
  </div>
</div>
{% endblock %}


{% block js_extra %}

<script>

var ctx = document.getElementById('myChart');

const data = {
  labels: [
    'Estrategia & Habilidades',
    'Definición de procesos',
    'Keyword Management',
    'Informes y Resultados ',
  ],
  datasets: [{
    label: 'Matriz de Madurez',
    data: [{{ seo_ave }}, {{ sistemas_ave }}, {{ keyword_ave }}, {{ resultados_ave }}],
    fill: true,
    backgroundColor: 'rgba(212, 189, 139, 0.5)',
    borderColor: 'rgb(177, 143, 80)',
    pointBackgroundColor: 'rgb(177, 143, 80)',
    pointBorderColor: 'rgb(212, 189, 139)',
    pointHoverBackgroundColor: '#fff',
    pointHoverBorderColor: 'rgb(177, 143, 80)',
  }]
};

const config = {
  type: 'radar',
  data: data,
  options: {
plugins:{
         legend:{
            display:false
         }
      },
  scale: {
      max: 5,
      min: 0,
    ticks: {
        beginAtZero: true,
        stepSize: 1
    }
    },
    elements: {
      line: {
        borderWidth: 3
      }
    },
  },
};

var myChart = new Chart(ctx, config);


</script>
{% endblock %}
